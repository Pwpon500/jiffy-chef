# Generated by Jiffy

log syslog all;
router id <%= @id %>;

# This pseudo-protocol watches all interface up/down events.
protocol device {
     scan time 10;
}

protocol direct {
    ipv4;
    interface "eth0";
    interface "gre1";
}

## fib; make sure all routes are added in and out:
protocol kernel {
    persist;
    scan time 20;
    metric 64;

    ipv4 {
        import all;
        export all;
    };
}

protocol static {
    ipv4;
    # default route
    route 0.0.0.0/0 via <%= @gateway %>;

<% @routes.each do |route| -%>
    route <%= route[0] %> via <%= route[1] %>;
<% end %>
}
